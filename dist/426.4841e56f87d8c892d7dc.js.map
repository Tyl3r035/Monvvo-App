{"version":3,"file":"426.4841e56f87d8c892d7dc.js","mappings":"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","sources":["webpack://monvvo-app/./public/js/pdf/mortgage-pdf.js","webpack://monvvo-app/./public/js/mortgage-calculator.js"],"sourcesContent":["import jsPDF from \"jspdf\"; // Add this at the top\nimport \"jspdf-autotable\"; // Ensure this is also imported for table generation\n\nexport function generateMortgagePdf(paymentData, amortizationData) {\n    const doc = new jsPDF();\n\n    // Styles\n    const colors = {\n        navyBlue: \"#1C2939\",\n        forestGreen: \"#175134\",\n        lightGreen2: \"#91BBA6\",\n        white: \"#FFFFFF\",\n        black: \"#232525\",\n    };\n\n    try {\n        // Add Logo with Responsive Height\n        const logoPath = \"./img/logos/monvvo-logo.png\"; // Relative path to your logo\n        const logoX = 14; // X position\n        const logoY = 10; // Y position\n        const logoWidth = 40; // Desired width in mm\n        const logoAspectRatio = 6.625; // Aspect ratio (width/height)\n\n        if (logoAspectRatio <= 0) throw new Error(\"Invalid aspect ratio\");\n\n        const logoHeight = logoWidth / logoAspectRatio;\n\n        // Add the logo to the PDF\n        doc.addImage(logoPath, \"PNG\", logoX, logoY, logoWidth, logoHeight);\n    } catch (error) {\n        console.error(\"Error adding logo to PDF:\", error);\n    }\n\n    // Adjust Title Section Position\n    const titleY = 10 + (40 / 6.625) + 15; // Adjust dynamically based on logo height\n    doc.setFont(\"serif\", \"bold\");\n    doc.setTextColor(colors.black); // Ensure the title text is black\n    doc.setFontSize(20);\n    doc.text(\"Monvvo Mortgage Calculation Report\", 14, titleY);\n\n    // Subheader Section\n    doc.setFontSize(12);\n    doc.setFont(\"sans-serif\", \"normal\");\n    doc.setTextColor(colors.forestGreen); // Subheader remains green\n    const subheaderY = titleY + 8;\n    doc.text(\"Your Trusted Tool in Precision Calculation\", 14, subheaderY);\n\n    // Disclaimer Section\n    const disclaimerText = \"Actual mortgage amount may vary. This is only an estimate.\";\n    const disclaimerY = subheaderY + 10;\n\n    doc.setFontSize(10);\n    doc.setFont(\"sans-serif\", \"italic\");\n    doc.setTextColor(colors.black);\n\n    // Add disclaimer text as regular text (not a link)\n    doc.text(disclaimerText, 14, disclaimerY);\n    // Payment Details Section\n    doc.setTextColor(colors.black);\n    doc.setFontSize(14);\n    doc.setFont(\"serif\", \"bold\");\n    const paymentDetailsY = disclaimerY + 10;\n    doc.text(\"Payment Details\", 14, paymentDetailsY);\n\n    const paymentDetails = paymentData.map(item => [item.label, `${item.value.toLocaleString()}`]);\n    doc.autoTable({\n        startY: paymentDetailsY + 5,\n        head: [\n            [\n                { content: \"Detail\", styles: { fillColor: colors.forestGreen, textColor: colors.white, fontStyle: \"sans-serif\" } },\n                { content: \"Value\", styles: { fillColor: colors.forestGreen, textColor: colors.white, fontStyle: \"sans-serif\" } }\n            ]\n        ],\n        body: paymentDetails,\n        styles: { fontStyle: \"sans-serif\" },\n    });\n\n    // Amortization Schedule Section\n    doc.setFontSize(14);\n    doc.setFont(\"serif\", \"bold\");\n    doc.setTextColor(colors.black);\n    const amortizationY = doc.lastAutoTable.finalY + 10;\n    doc.text(\"Amortization Schedule\", 14, amortizationY);\n\n    const amortizationDetails = amortizationData.map((row, index) => [\n        index + 1,\n        row.date,\n        `$${row.principal.toFixed(2)}`,\n        `$${row.interest.toFixed(2)}`,\n        `$${row.balance.toFixed(2)}`\n    ]);\n\n    doc.autoTable({\n        startY: amortizationY + 5,\n        head: [\n            [\n                { content: \"Month\", styles: { fillColor: colors.forestGreen, textColor: colors.white, fontStyle: \"sans-serif\" } },\n                { content: \"Date\", styles: { fillColor: colors.forestGreen, textColor: colors.white, fontStyle: \"sans-serif\" } },\n                { content: \"Principal\", styles: { fillColor: colors.forestGreen, textColor: colors.white, fontStyle: \"sans-serif\" } },\n                { content: \"Interest\", styles: { fillColor: colors.forestGreen, textColor: colors.white, fontStyle: \"sans-serif\" } },\n                { content: \"Remaining Balance\", styles: { fillColor: colors.forestGreen, textColor: colors.white, fontStyle: \"sans-serif\" } }\n            ]\n        ],\n        body: amortizationDetails,\n        styles: { fontStyle: \"sans-serif\" },\n    });\n\n    // Footer\n    const pageHeight = doc.internal.pageSize.height;\n    doc.setFillColor(colors.navyBlue);\n    doc.rect(0, pageHeight - 20, doc.internal.pageSize.width, 20, \"F\");\n    doc.setTextColor(colors.white);\n    doc.setFontSize(10);\n    doc.setFont(\"sans-serif\", \"normal\");\n    doc.text(\"2024, Monvvo | Trusted Tool in Precision Calculation\", 14, pageHeight - 8);\n\n    // Save the PDF\n    doc.save(\"Monvvo_Mortgage_Report.pdf\");\n}\n","import { generateMortgagePdf } from \"./pdf/mortgage-pdf.js\";\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n    console.log(\"DOMContentLoaded event fired\");\n\n    \n\n    // Disable Google Analytics on localhost\n    if (window.location.hostname === \"localhost\") {\n        console.log(\"Running on localhost, disabling Google Analytics\");\n    }\n\n    // Mortgage calculation functionality\n    const homePriceInput = document.getElementById('home-price');\n    const downPaymentAmountInput = document.getElementById('down-payment-amount');\n    const downPaymentPercentageInput = document.getElementById('down-payment-percentage');\n    const loanTermInput = document.getElementById('loan-term');\n    const interestRateInput = document.getElementById('interest-rate');\n    const paymentFrequencyInput = document.getElementById('payment-frequency');\n    const propertyTaxInput = document.getElementById('property-tax');\n    const pmiExpenseInput = document.getElementById('pmi-expense');\n    const hoaExpenseInput = document.getElementById('hoa-expense');\n    const updateBtn = document.getElementById('update-btn');\n    const resetBtn = document.getElementById('reset-btn');\n    const canvas = document.getElementById('mortgageChart');\n    const amortizationChartCanvas = document.getElementById('amortizationChart');\n    const labelsContainer = document.getElementById('chartLabels');\n    const amortizationLabelsContainer = document.getElementById('amortizationLabels');\n\n\n\n    const defaultValues = {\n        homePrice: 500000,\n        downPaymentAmount: 25000,\n        downPaymentPercentage: 5,\n        loanTerm: 25,\n        interestRate: 7.04,\n        propertyTax: 250,\n        pmiExpense: 200,\n        hoaExpense: 0\n    };\n\n\n    homePriceInput.placeholder = defaultValues.homePrice;\n    downPaymentAmountInput.placeholder = defaultValues.downPaymentAmount;\n    downPaymentPercentageInput.placeholder = defaultValues.downPaymentPercentage;\n    loanTermInput.value = defaultValues.loanTerm; // Keep loan term as value since it is a dropdown\n    interestRateInput.placeholder = defaultValues.interestRate;\n    propertyTaxInput.placeholder = defaultValues.propertyTax;\n    pmiExpenseInput.placeholder = defaultValues.pmiExpense;\n    hoaExpenseInput.placeholder = defaultValues.hoaExpense;\n\n    // Set payment frequency to default\n    paymentFrequencyInput.value = \"monthly\";\n\n\n    const formatter = new Intl.NumberFormat('en-US', {\n        minimumFractionDigits: 2,\n        maximumFractionDigits: 2\n    });\n\n    const inputsToRestrict = [\n        homePriceInput,\n        downPaymentAmountInput,\n        downPaymentPercentageInput,\n        loanTermInput,\n        interestRateInput,\n        propertyTaxInput,\n        pmiExpenseInput,\n        hoaExpenseInput\n    ];\n\n    inputsToRestrict.forEach(input => {\n        input.addEventListener('keydown', function (event) {\n            if (event.key === \"-\" || event.key === \"e\") {\n                event.preventDefault();\n            }\n        });\n    });\n\n    let lastAmortizationData = null;\n\n    downPaymentAmountInput.addEventListener('input', function () {\n        const homePrice = parseFloat(homePriceInput.value) || defaultValues.homePrice;\n        const downPaymentAmount = parseFloat(downPaymentAmountInput.value) || 0;\n        const downPaymentPercentage = (downPaymentAmount / homePrice) * 100;\n        downPaymentPercentageInput.value = Number.isInteger(downPaymentPercentage)\n            ? downPaymentPercentage\n            : downPaymentPercentage.toFixed(2);\n    });\n\n    downPaymentPercentageInput.addEventListener('input', function () {\n        const homePrice = parseFloat(homePriceInput.value) || defaultValues.homePrice;\n        const downPaymentPercentage = parseFloat(downPaymentPercentageInput.value) || 0;\n        const downPaymentAmount = Math.ceil((downPaymentPercentage / 100) * homePrice);\n        downPaymentAmountInput.value = downPaymentAmount;\n    });\n\n    homePriceInput.addEventListener('input', function () {\n        const homePrice = parseFloat(homePriceInput.value) || defaultValues.homePrice;\n        const downPaymentAmount = parseFloat(downPaymentAmountInput.value) || 0;\n        const downPaymentPercentage = (downPaymentAmount / homePrice) * 100;\n        downPaymentPercentageInput.value = Number.isInteger(downPaymentPercentage)\n            ? downPaymentPercentage\n            : downPaymentPercentage.toFixed(2);\n    });\n\n    updateBtn.addEventListener('click', function (event) {\n        event.preventDefault();\n        console.log(\"Update button clicked\");\n        calculateAndDisplayResults();\n    });\n\n    resetBtn.addEventListener('click', function (event) {\n        event.preventDefault();\n        console.log(\"Reset button clicked\");\n        resetInputs();\n    });\n\n    const tabPaymentBreakdown = document.getElementById(\"tab-payment-breakdown\");\n    const tabAmortizationSchedule = document.getElementById(\"tab-amortization-schedule\");\n\n    const paymentBreakdownContent = document.getElementById(\"payment-breakdown-content\");\n    const amortizationScheduleContent = document.getElementById(\"amortization-schedule-content\");\n\n\n\n\n\n\n// function showTab(tabName) {\n//     if (tabName === \"payment\") {\n//         paymentBreakdownContent.style.display = \"block\";\n//         amortizationScheduleContent.style.display = \"none\";\n//         tabPaymentBreakdown.classList.add(\"tab-active\");\n//         tabAmortizationSchedule.classList.remove(\"tab-active\");\n\n//         if (lastAmortizationData) {\n//             const {\n//                 periodicPrincipalAndInterest,\n//                 periodicPropertyTax,\n//                 periodicPMI,\n//                 periodicHOA,\n//             } = lastAmortizationData;\n\n//             // Redraw the stacked bar chart\n//             updateHorizontalStackedBarChart(\n//                 periodicPrincipalAndInterest,\n//                 periodicPropertyTax,\n//                 periodicPMI,\n//                 periodicHOA\n//             );\n//         }\n//     } else if (tabName === \"amortization\") {\n//         paymentBreakdownContent.style.display = \"none\";\n//         amortizationScheduleContent.style.display = \"block\";\n//         tabPaymentBreakdown.classList.remove(\"tab-active\");\n//         tabAmortizationSchedule.classList.add(\"tab-active\");\n\n//         if (lastAmortizationData) {\n//             const {\n//                 balanceData,\n//                 cumulativeInterestData,\n//                 cumulativePrincipalData,\n//                 totalInterestPaid,\n//                 totalPrincipalPaid,\n//                 totalAmountPaid,\n//             } = lastAmortizationData;\n\n//             drawAmortizationChart(\n//                 balanceData,\n//                 cumulativeInterestData,\n//                 cumulativePrincipalData\n//             );\n//             updateAmortizationLabels(\n//                 totalInterestPaid,\n//                 totalPrincipalPaid,\n//                 totalAmountPaid\n//             );\n//         }\n//     }\n// }\n\n\n\n\n\nfunction showTab(tabName) {\n    if (tabName === \"payment\") {\n        // Show Payment Breakdown tab\n        paymentBreakdownContent.style.display = \"block\";\n        amortizationScheduleContent.style.display = \"none\";\n        tabPaymentBreakdown.classList.add(\"tab-active\");\n        tabAmortizationSchedule.classList.remove(\"tab-active\");\n\n        if (lastAmortizationData) {\n            const {\n                periodicPrincipalAndInterest,\n                periodicPropertyTax,\n                periodicPMI,\n                periodicHOA,\n            } = lastAmortizationData;\n\n            console.log(\"Redrawing Payment Breakdown tab:\", {\n                periodicPrincipalAndInterest,\n                periodicPropertyTax,\n                periodicPMI,\n                periodicHOA,\n            });\n\n            // Redraw the stacked bar chart\n            updateHorizontalStackedBarChart(\n                periodicPrincipalAndInterest,\n                periodicPropertyTax,\n                periodicPMI,\n                periodicHOA\n            );\n        } else {\n            console.error(\"No data available for Payment Breakdown tab.\");\n        }\n    } else if (tabName === \"amortization\") {\n        // Show Amortization tab\n        paymentBreakdownContent.style.display = \"none\";\n        amortizationScheduleContent.style.display = \"block\";\n        tabPaymentBreakdown.classList.remove(\"tab-active\");\n        tabAmortizationSchedule.classList.add(\"tab-active\");\n\n        if (lastAmortizationData) {\n            const {\n                balanceData,\n                cumulativeInterestData,\n                cumulativePrincipalData,\n                totalInterestPaid,\n                totalPrincipalPaid,\n                totalAmountPaid,\n            } = lastAmortizationData;\n\n            console.log(\"Switching to Amortization tab:\", {\n                balanceData,\n                cumulativeInterestData,\n                cumulativePrincipalData,\n                totalInterestPaid,\n                totalPrincipalPaid,\n                totalAmountPaid,\n            });\n\n            // Draw amortization chart\n            drawAmortizationChart(\n                balanceData,\n                cumulativeInterestData,\n                cumulativePrincipalData\n            );\n\n            // Update amortization chart labels\n            updateAmortizationLabels(\n                totalInterestPaid,\n                totalPrincipalPaid,\n                totalAmountPaid\n            );\n        } else {\n            console.error(\"No data available for Amortization tab.\");\n        }\n    }\n}\n\n\n\n\n\n    tabPaymentBreakdown.addEventListener(\"click\", () => showTab(\"payment\"));\n    tabAmortizationSchedule.addEventListener(\"click\", () => showTab(\"amortization\"));\n    \n\n\n    function calculateAndDisplayResults() {\n        console.log(\"Calculating and displaying results\");\n    \n        // Retrieve inputs with fallback to default values\n        const homePrice = parseFloat(homePriceInput.value) || defaultValues.homePrice;\n        const downPaymentAmount = parseFloat(downPaymentAmountInput.value) || defaultValues.downPaymentAmount;\n        const loanTerm = parseInt(loanTermInput.value) || defaultValues.loanTerm;\n        const interestRate = parseFloat(interestRateInput.value) || defaultValues.interestRate;\n        const propertyTax = parseFloat(propertyTaxInput.value) || defaultValues.propertyTax;\n        const pmiExpense = parseFloat(pmiExpenseInput.value) || defaultValues.pmiExpense;\n        const hoaExpense = parseFloat(hoaExpenseInput.value) || defaultValues.hoaExpense;\n    \n        // Calculations for principal, interest rate, and number of payments\n        const principal = homePrice - downPaymentAmount;\n        const monthlyInterestRate = (interestRate / 100) / 12;\n        const numberOfPayments = loanTerm * 12;\n    \n        // Calculate monthly principal and interest payment\n        const periodicPrincipalAndInterest = principal * monthlyInterestRate *\n            Math.pow(1 + monthlyInterestRate, numberOfPayments) /\n            (Math.pow(1 + monthlyInterestRate, numberOfPayments) - 1);\n    \n        // Keep additional inputs as monthly values\n        const periodicPropertyTax = propertyTax;\n        const periodicPMI = pmiExpense;\n        const periodicHOA = hoaExpense;\n    \n        // Adjustments for payment frequency\n        const selectedFrequency = paymentFrequencyInput.value;\n        let paymentFactor = 1; // Default to monthly\n        if (selectedFrequency === 'biweekly') {\n            paymentFactor = 12 / 26;\n        } else if (selectedFrequency === 'weekly') {\n            paymentFactor = 12 / 52;\n        } else if (selectedFrequency === 'accelerated-biweekly') {\n            paymentFactor = 1 / 26;\n        } else if (selectedFrequency === 'accelerated-weekly') {\n            paymentFactor = 1 / 52;\n        }\n    \n        // Adjust only principal and interest for frequency\n        const adjustedPrincipalAndInterest = periodicPrincipalAndInterest * paymentFactor;\n    \n        // Keep additional inputs unadjusted\n        const adjustedPropertyTax = periodicPropertyTax; // Unchanged\n        const adjustedPMI = periodicPMI; // Unchanged\n        const adjustedHOA = periodicHOA; // Unchanged\n    \n        // Update Payment Breakdown\n        updateLabels(adjustedPrincipalAndInterest, adjustedPropertyTax, adjustedPMI, adjustedHOA);\n        updateHorizontalStackedBarChart(\n            adjustedPrincipalAndInterest,\n            adjustedPropertyTax,\n            adjustedPMI,\n            adjustedHOA\n        );\n    \n        const amortizationData = calculateAmortizationSchedule(\n            principal,\n            monthlyInterestRate,\n            periodicPrincipalAndInterest,\n            numberOfPayments\n        );\n    \n        populateAmortizationTable(amortizationData); // Pass entire data object\n    \n        // Render Amortization Chart\n        drawAmortizationChart(\n            amortizationData.balanceData,\n            amortizationData.cumulativeInterestData,\n            amortizationData.cumulativePrincipalData\n        );\n    \n        // Update Amortization Chart Labels\n        updateAmortizationLabels(\n            amortizationData.totalInterestPaid,\n            amortizationData.totalPrincipalPaid,\n            amortizationData.totalAmountPaid\n        );\n    \n        // Store data for later use\n        lastAmortizationData = {\n            ...amortizationData, // Include amortization data\n            periodicPrincipalAndInterest: adjustedPrincipalAndInterest,\n            periodicPropertyTax: adjustedPropertyTax,\n            periodicPMI: adjustedPMI,\n            periodicHOA: adjustedHOA,\n        };\n\n        // initializeExpandCollapseLogic();\n\n    \n        console.log(\"Updated lastAmortizationData:\", {\n            principal,\n            monthlyInterestRate,\n            numberOfPayments,\n            periodicPrincipalAndInterest,\n            totalPayment: adjustedPrincipalAndInterest + adjustedPropertyTax + adjustedPMI + adjustedHOA,\n            lastAmortizationData,\n        });\n    }\n    \n\n\n\n\n\n\n\n\n\n\nfunction updateHoverValues(balance, interest, principal) {\n    const labelValues = amortizationLabelsContainer.querySelectorAll('.label-value');\n    if (labelValues.length === 3) {\n        labelValues[0].textContent = formatter.format(interest);   // Update interest label\n        labelValues[1].textContent = formatter.format(principal); // Update principal label\n        labelValues[2].textContent = formatter.format(balance);   // Update balance label\n    }\n}\n\n\n\n\n    \n    function resetInputs() {\n        console.log(\"Resetting inputs to default values\");\n    \n        // Clear inputs without populating default values\n        homePriceInput.value = \"\";\n        downPaymentAmountInput.value = \"\";\n        downPaymentPercentageInput.value = \"\";\n        loanTermInput.value = \"25\";\n        interestRateInput.value = \"\";\n        propertyTaxInput.value = \"\";\n        pmiExpenseInput.value = \"\";\n        hoaExpenseInput.value = \"\";\n    \n        // Reset payment frequency to monthly\n        paymentFrequencyInput.value = \"monthly\";\n    \n        // Recalculate using default values (inputs remain blank)\n        calculateAndDisplayResults();\n    }\n    \n\n\n\n    function drawRoundedRect(ctx, x, y, width, height, radius) {\n        ctx.beginPath();\n        ctx.moveTo(x + radius, y);\n        ctx.lineTo(x + width - radius, y);\n        ctx.quadraticCurveTo(x + width, y, x + width, y + radius);\n        ctx.lineTo(x + width, y + height - radius);\n        ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n        ctx.lineTo(x + radius, y + height);\n        ctx.quadraticCurveTo(x, y + height, x, y + height - radius);\n        ctx.lineTo(x, y + radius);\n        ctx.quadraticCurveTo(x, y, x + radius, y);\n        ctx.closePath();\n        ctx.clip();\n    }\n\n\n\n    function updateHorizontalStackedBarChart(principalAndInterest, propertyTax, pmi, hoa) {\n        console.log(\"Chart Data - Principal & Interest:\", principalAndInterest);\n        console.log(\"Chart Data - Property Tax:\", propertyTax);\n        console.log(\"Chart Data - PMI:\", pmi);\n        console.log(\"Chart Data - HOA:\", hoa);\n        const canvas = document.getElementById('mortgageChart');\n        const ctx = canvas.getContext('2d');\n        const parentWidth = canvas.parentElement.offsetWidth;\n    \n        // Set canvas dimensions\n        canvas.width = parentWidth;\n        canvas.height = 100; // Standard height for the bar chart\n    \n        // Clear the canvas\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n    \n        // Data and colors\n        const data = [principalAndInterest, propertyTax, pmi, hoa];\n        const labels = ['Principal & Interest', 'Property Tax', 'PMI', 'HOA'];\n        const colors = ['#175134', '#3EB721', '#91BBA6', '#B3D4C2'];\n    \n        // Chart dimensions\n        const chartHeight = 60;\n        const chartWidth = canvas.width;\n        const total = data.reduce((a, b) => a + b, 0);\n        const maxTotal = Math.max(total, 1); // Avoid division by zero\n        const gap = 2; // Gap between segments\n        const yOffset = canvas.height / 2 - chartHeight / 2;\n    \n        let cumulativeWidth = 0;\n    \n        // Draw each segment\n        data.forEach((value, index) => {\n            let segmentWidth = (value / maxTotal) * chartWidth - gap;\n    \n            // Ensure the last segment fills the remaining width\n            if (index === data.length - 1) {\n                segmentWidth = chartWidth - cumulativeWidth; // Adjust last segment to fill remaining space\n            }\n    \n            ctx.fillStyle = colors[index];\n    \n            // Apply border radius to the first and last segments only\n            const isFirstSegment = index === 0;\n            const isLastSegment = index === data.length - 1;\n    \n            drawOuterRoundedRect(\n                ctx,\n                cumulativeWidth, // X position\n                yOffset, // Y position\n                segmentWidth, // Width\n                chartHeight, // Height\n                5, // Border radius for outer edges\n                isFirstSegment,\n                isLastSegment\n            );\n    \n            cumulativeWidth += segmentWidth + gap; // Increment for next bar\n        });\n    \n        // Update the labels below the chart\n        updateStackedBarLabels(principalAndInterest, propertyTax, pmi, hoa, labels, colors);\n    }\n    \n    /**\n     * Update the labels below the stacked bar chart.\n     */\n    function updateStackedBarLabels(principalAndInterest, propertyTax, pmi, hoa, labels, colors) {\n        const labelsContainer = document.getElementById('chartLabels');\n        labelsContainer.innerHTML = ''; // Clear any existing labels\n    \n        const data = [principalAndInterest, propertyTax, pmi, hoa];\n    \n        data.forEach((value, index) => {\n            const labelItem = document.createElement('div');\n            labelItem.classList.add('label-item');\n    \n            const colorCircle = document.createElement('span');\n            colorCircle.classList.add('color-circle');\n            colorCircle.style.backgroundColor = colors[index];\n    \n            const labelName = document.createElement('span');\n            labelName.classList.add('label-name');\n            labelName.textContent = labels[index];\n    \n            const labelValue = document.createElement('span');\n            labelValue.classList.add('label-value');\n            labelValue.textContent = `${formatter.format(value)}`;\n    \n            labelItem.appendChild(colorCircle);\n            labelItem.appendChild(labelName);\n            labelItem.appendChild(labelValue);\n    \n            labelsContainer.appendChild(labelItem);\n        });\n    }\n    \n    /**\n     * Helper function to draw rounded rectangles only on outer edges.\n     */\n    function drawOuterRoundedRect(ctx, x, y, width, height, radius, isFirst, isLast) {\n        ctx.beginPath();\n    \n        // Top-left corner\n        if (isFirst) {\n            ctx.moveTo(x + radius, y);\n            ctx.lineTo(x + width, y); // Top edge\n        } else {\n            ctx.moveTo(x, y);\n            ctx.lineTo(x + width, y); // Top edge\n        }\n    \n        // Top-right corner\n        if (isLast) {\n            ctx.lineTo(x + width, y + radius);\n            ctx.quadraticCurveTo(x + width, y, x + width - radius, y);\n        } else {\n            ctx.lineTo(x + width, y); // Top-right edge (no rounding)\n        }\n    \n        // Bottom-right corner\n        if (isLast) {\n            ctx.lineTo(x + width - radius, y + height);\n            ctx.quadraticCurveTo(x + width, y + height, x + width, y + height - radius);\n        } else {\n            ctx.lineTo(x + width, y + height); // Bottom-right edge (no rounding)\n        }\n    \n        // Bottom-left corner\n        if (isFirst) {\n            ctx.lineTo(x + radius, y + height);\n            ctx.quadraticCurveTo(x, y + height, x, y + height - radius);\n            ctx.lineTo(x, y + radius);\n            ctx.quadraticCurveTo(x, y, x + radius, y);\n        } else {\n            ctx.lineTo(x, y + height); // Bottom-left edge (no rounding)\n            ctx.lineTo(x, y); // Close the rectangle\n        }\n    \n        ctx.closePath();\n        ctx.fill();\n    }\n    \n\n    function updateLabels(principalAndInterest, propertyTax, pmi, hoa) {\n        const periodicPaymentElement = document.getElementById('monthly-payment-value');\n        const selectedFrequency = paymentFrequencyInput.value;\n    \n        let frequencyLabel = \"Month\";\n        if (selectedFrequency === \"biweekly\") {\n            frequencyLabel = \"Bi-Week\";\n        } else if (selectedFrequency === \"weekly\") {\n            frequencyLabel = \"Week\";\n        } else if (selectedFrequency === \"accelerated-biweekly\") {\n            frequencyLabel = \"Accelerated Bi-Week\";\n        } else if (selectedFrequency === \"accelerated-weekly\") {\n            frequencyLabel = \"Accelerated Week\";\n        }\n    \n        // Calculate total periodic payment\n        const totalPeriodicPayment = principalAndInterest + propertyTax + pmi + hoa;\n    \n        // Update the payment element\n        periodicPaymentElement.innerHTML = `\n            <span class=\"payment-amount\">$${formatter.format(totalPeriodicPayment)}</span>\n            <span class=\"payment-frequency\"> / ${frequencyLabel}</span>\n        `;\n        \n    }\n    \n    \n    function calculateAmortizationSchedule(principal, monthlyInterestRate, monthlyPrincipalAndInterest, numberOfPayments) {\n        const amortizationData = []; // Array to hold each period's data\n        let balance = principal;\n        let totalInterestPaid = 0;\n        let totalPrincipalPaid = 0;\n    \n        for (let i = 0; i < numberOfPayments; i++) {\n            const interestPayment = balance * monthlyInterestRate;\n            const principalPayment = monthlyPrincipalAndInterest - interestPayment;\n            balance = Math.max(balance - principalPayment, 0);\n    \n            totalInterestPaid += interestPayment;\n            totalPrincipalPaid += principalPayment;\n    \n            amortizationData.push({\n                principal: principalPayment,\n                interest: interestPayment,\n                balance: balance\n            });\n    \n            if (balance <= 0) break; // Stop if fully paid\n        }\n    \n        return {\n            schedule: amortizationData, // Array for the table\n            balanceData: amortizationData.map(row => row.balance),\n            cumulativeInterestData: amortizationData.map((row, index) =>\n                amortizationData.slice(0, index + 1).reduce((sum, r) => sum + r.interest, 0)\n            ),\n            cumulativePrincipalData: amortizationData.map((row, index) =>\n                amortizationData.slice(0, index + 1).reduce((sum, r) => sum + r.principal, 0)\n            ),\n            totalInterestPaid,\n            totalPrincipalPaid,\n            totalAmountPaid: totalInterestPaid + totalPrincipalPaid,\n        };\n    }\n    \n    function populateAmortizationTable(amortizationData) {\n        const tableBody = document.getElementById('amortization-table-body');\n        tableBody.innerHTML = ''; // Clear existing rows\n    \n        amortizationData.schedule.forEach((row, index) => {\n            const tr = document.createElement('tr');\n    \n            const dateCell = document.createElement('td');\n            const date = new Date();\n            date.setMonth(date.getMonth() + index); // Increment month\n            dateCell.textContent = date.toLocaleDateString('en-US', { month: 'short', year: 'numeric' });\n            tr.appendChild(dateCell);\n    \n            const principalCell = document.createElement('td');\n            principalCell.textContent = `$${formatter.format(row.principal)}`;\n            tr.appendChild(principalCell);\n    \n            const interestCell = document.createElement('td');\n            interestCell.textContent = `$${formatter.format(row.interest)}`;\n            tr.appendChild(interestCell);\n    \n            const balanceCell = document.createElement('td');\n            balanceCell.textContent = `$${formatter.format(row.balance)}`;\n            tr.appendChild(balanceCell);\n    \n            tableBody.appendChild(tr);\n        });\n    \n        document.getElementById('amortization-schedule').style.display = 'block'; // Show table\n    \n        // Ensure toggle functionality works with the new rows\n        initializeExpandCollapseLogic(); // Call the toggle initialization\n    }\n    \n    \n  \n    function initializeExpandCollapseLogic() {\n        const expandBox = document.querySelector(\".expand-box\");\n        const amortizationTableBody = document.getElementById(\"amortization-table-body\");\n        const expandText = document.querySelector(\".expand-text\");\n    \n        // Ensure the elements exist\n        if (!expandBox || !amortizationTableBody || !expandText) {\n            console.error(\"Expand/Collapse elements not found.\");\n            return;\n        }\n    \n        console.log(\"Expand/Collapse Logic Initialized\");\n    \n        // Initial state: show only the first three rows\n        const rows = Array.from(amortizationTableBody.rows);\n        rows.forEach((row, index) => {\n            row.style.display = index < 3 ? \"table-row\" : \"none\";\n        });\n    \n        // Add click event for toggling\n        expandBox.addEventListener(\"click\", function () {\n            const isExpanded = expandText.textContent === \"Expand\";\n    \n            console.log(`Expand box clicked. Current state: ${isExpanded ? \"Expanding\" : \"Collapsing\"}`);\n    \n            // Toggle row visibility\n            rows.forEach((row, index) => {\n                row.style.display = isExpanded || index < 3 ? \"table-row\" : \"none\";\n            });\n    \n            // Update the expand/collapse text\n            expandText.textContent = isExpanded ? \"Collapse\" : \"Expand\";\n        });\n    }\n    \n  \n    // function drawAmortizationChart(balanceData, cumulativeInterestData, cumulativePrincipalData, hoverIndex = null) {\n    //     const ctx = amortizationChartCanvas.getContext('2d');\n    //     const dpr = window.devicePixelRatio || 1;\n    \n    //     // Adjust height dynamically based on screen width\n    //     let height = window.innerWidth < 500 ? 200 : 300;\n    \n    //     amortizationChartCanvas.style.width = '100%';\n    //     amortizationChartCanvas.style.height = `${height}px`;\n    \n    //     const width = amortizationChartCanvas.offsetWidth;\n    //     amortizationChartCanvas.width = width * dpr;\n    //     amortizationChartCanvas.height = height * dpr;\n    \n    //     if (dpr > 1) {\n    //         ctx.scale(dpr, dpr);\n    //     }\n    \n    //     ctx.clearRect(0, 0, width * dpr, height * dpr);\n    \n    //     const months = balanceData.length;\n    //     const maxBalance = Math.max(...balanceData);\n    //     const maxCumulative = Math.max(...cumulativeInterestData, ...cumulativePrincipalData);\n    \n    //     const yAxisMax = Math.ceil(Math.max(maxBalance, maxCumulative) / 100000) * 100000;\n    \n    //     const padding = { top: 30, right: 20, bottom: 30, left: 70 };\n    //     const gridColor = '#d0d0d0';\n    //     const labelColor = '#505050';\n    //     const labelFont = '14px Open Sans';\n    \n    //     ctx.font = labelFont;\n    //     ctx.textAlign = 'right';\n    \n    //     function getY(value) {\n    //         return height - padding.bottom - (value / yAxisMax) * (height - padding.top - padding.bottom);\n    //     }\n    \n    //     function getX(index) {\n    //         return padding.left + (index / months) * (width - padding.left - padding.right);\n    //     }\n    \n    //     // Draw horizontal grid lines\n    //     for (let i = 0; i <= 3; i++) { // Include top, middle, and bottom lines\n    //         const yValue = i * (yAxisMax / 3); // Divide Y-axis into 3 segments\n    //         const y = getY(yValue);\n    \n    //         ctx.strokeStyle = gridColor;\n    //         ctx.lineWidth = 1;\n    //         ctx.beginPath();\n    //         ctx.moveTo(padding.left, y);\n    //         ctx.lineTo(width - padding.right, y);\n    //         ctx.stroke();\n    \n    //         // Draw Y-axis labels\n    //         ctx.fillStyle = labelColor;\n    //         ctx.fillText(`$${(yValue / 1000).toFixed(0)}K`, padding.left - 10, y + 4);\n    //     }\n    \n    //     // Draw vertical grid lines and labels for every 5 years, including outermost lines\n    //     ctx.textAlign = 'center';\n    //     const intervalMonths = 12 * 5; // Every 5 years\n    //     const currentYear = new Date().getFullYear();\n    \n    //     // Draw outermost grid lines first\n    //     ctx.strokeStyle = gridColor;\n    //     ctx.lineWidth = 1;\n    \n    //     // Left-most vertical grid line\n    //     ctx.beginPath();\n    //     ctx.moveTo(padding.left, padding.top);\n    //     ctx.lineTo(padding.left, height - padding.bottom);\n    //     ctx.stroke();\n    //     ctx.fillStyle = labelColor;\n    //     ctx.fillText(currentYear, padding.left, height - 5); // Left-most label\n    \n    //     // Right-most vertical grid line\n    //     ctx.beginPath();\n    //     ctx.moveTo(width - padding.right, padding.top);\n    //     ctx.lineTo(width - padding.right, height - padding.bottom);\n    //     ctx.stroke();\n    //     ctx.fillStyle = labelColor;\n    //     ctx.fillText(currentYear + Math.floor(months / 12), width - padding.right, height - 5); // Right-most label\n    \n    //     // Draw intermediate vertical grid lines (every 5 years)\n    //     for (let i = intervalMonths; i < months; i += intervalMonths) {\n    //         const x = getX(i);\n    //         ctx.beginPath();\n    //         ctx.moveTo(x, padding.top);\n    //         ctx.lineTo(x, height - padding.bottom);\n    //         ctx.strokeStyle = gridColor;\n    //         ctx.stroke();\n    \n    //         const yearLabel = currentYear + Math.floor(i / 12);\n    //         ctx.fillStyle = labelColor;\n    //         ctx.fillText(yearLabel, x, height - 5);\n    //     }\n    \n    //     // Draw hover vertical line first (underneath everything else)\n    //     if (hoverIndex !== null) {\n    //         const hoverX = getX(hoverIndex);\n    \n    //         ctx.beginPath();\n    //         ctx.moveTo(hoverX, padding.top);\n    //         ctx.lineTo(hoverX, height - padding.bottom);\n    //         ctx.strokeStyle = 'rgba(0, 0, 0, 0.2)'; // Subtle line\n    //         ctx.lineWidth = 1;\n    //         ctx.stroke();\n    //     }\n    \n    //     // Draw chart lines\n    //     const drawLine = (data, color, lineWidth) => {\n    //         ctx.beginPath();\n    //         ctx.strokeStyle = color; // Ensure this is fully opaque\n    //         ctx.lineWidth = lineWidth;\n    //         ctx.moveTo(getX(0), getY(data[0]));\n    //         for (let i = 1; i < months; i++) {\n    //             ctx.lineTo(getX(i), getY(data[i]));\n    //         }\n    //         ctx.stroke();\n    //     };\n    \n    //     drawLine(balanceData, '#175134', 2); // Balance line\n    //     drawLine(cumulativeInterestData, '#3EB721', 2.5); // Cumulative Interest\n    //     drawLine(cumulativePrincipalData, '#91BBA6', 2.5); // Cumulative Principal\n    \n    //     // Draw hover dots on top (above lines and vertical line)\n    //     if (hoverIndex !== null) {\n    //         const hoverX = getX(hoverIndex);\n    \n    //         const dotData = [\n    //             { y: getY(balanceData[hoverIndex]), color: '#175134' },\n    //             { y: getY(cumulativeInterestData[hoverIndex]), color: '#3EB721' },\n    //             { y: getY(cumulativePrincipalData[hoverIndex]), color: '#91BBA6' },\n    //         ];\n    \n    //         dotData.forEach(({ y, color }) => {\n    //             ctx.beginPath();\n    //             ctx.arc(hoverX, y, 5, 0, 2 * Math.PI);\n    //             ctx.fillStyle = color; // Ensure this is fully opaque\n    //             ctx.fill();\n    //         });\n    //     }\n    // }\n    \n    function drawAmortizationChart(balanceData, cumulativeInterestData, cumulativePrincipalData, hoverIndex = null) {\n        const ctx = amortizationChartCanvas.getContext('2d');\n        const dpr = window.devicePixelRatio || 1;\n    \n        // Adjust height dynamically based on screen width\n        let height = window.innerWidth < 500 ? 200 : 300;\n    \n        amortizationChartCanvas.style.width = '100%';\n        amortizationChartCanvas.style.height = `${height}px`;\n    \n        const width = amortizationChartCanvas.offsetWidth;\n        amortizationChartCanvas.width = width * dpr;\n        amortizationChartCanvas.height = height * dpr;\n    \n        if (dpr > 1) {\n            ctx.scale(dpr, dpr);\n        }\n    \n        ctx.clearRect(0, 0, width * dpr, height * dpr);\n    \n        const months = balanceData.length;\n        const maxBalance = Math.max(...balanceData);\n        const maxCumulative = Math.max(...cumulativeInterestData, ...cumulativePrincipalData);\n    \n        const originalYAxisMax = Math.ceil(Math.max(maxBalance, maxCumulative) / 100000) * 100000;\n    \n        // Scale the y-axis grid height for smaller screens\n        const yAxisMax = window.innerWidth < 500 ? originalYAxisMax * 0.3 : originalYAxisMax;\n    \n        const padding = { top: 30, right: 20, bottom: 30, left: 70 };\n        const gridColor = '#d0d0d0';\n        const labelColor = '#505050';\n        const labelFont = '14px Open Sans';\n    \n        ctx.font = labelFont;\n        ctx.textAlign = 'right';\n    \n        function getY(value) {\n            return height - padding.bottom - (value / yAxisMax) * (height - padding.top - padding.bottom);\n        }\n    \n        function getX(index) {\n            return padding.left + (index / months) * (width - padding.left - padding.right);\n        }\n    \n        // Draw horizontal grid lines\n        for (let i = 0; i <= 3; i++) { // Include top, middle, and bottom lines\n            const yValue = i * (originalYAxisMax / 3); // Use originalYAxisMax for consistent labels\n            const y = getY(i * (yAxisMax / 3)); // Adjust grid spacing based on yAxisMax\n    \n            ctx.strokeStyle = gridColor;\n            ctx.lineWidth = 1;\n            ctx.beginPath();\n            ctx.moveTo(padding.left, y);\n            ctx.lineTo(width - padding.right, y);\n            ctx.stroke();\n    \n            // Draw Y-axis labels\n            ctx.fillStyle = labelColor;\n            ctx.fillText(`$${(yValue / 1000).toFixed(0)}K`, padding.left - 10, y + 4);\n        }\n    \n        // Draw vertical grid lines and labels for every 5 years, including outermost lines\n        ctx.textAlign = 'center';\n        const intervalMonths = 12 * 5; // Every 5 years\n        const currentYear = new Date().getFullYear();\n    \n        // Draw outermost grid lines first\n        ctx.strokeStyle = gridColor;\n        ctx.lineWidth = 1;\n    \n        // Left-most vertical grid line\n        ctx.beginPath();\n        ctx.moveTo(padding.left, padding.top);\n        ctx.lineTo(padding.left, height - padding.bottom);\n        ctx.stroke();\n        ctx.fillStyle = labelColor;\n        ctx.fillText(currentYear, padding.left, height - 5); // Left-most label\n    \n        // Right-most vertical grid line\n        ctx.beginPath();\n        ctx.moveTo(width - padding.right, padding.top);\n        ctx.lineTo(width - padding.right, height - padding.bottom);\n        ctx.stroke();\n        ctx.fillStyle = labelColor;\n        ctx.fillText(currentYear + Math.floor(months / 12), width - padding.right, height - 5); // Right-most label\n    \n        // Draw intermediate vertical grid lines (every 5 years)\n        for (let i = intervalMonths; i < months; i += intervalMonths) {\n            const x = getX(i);\n            ctx.beginPath();\n            ctx.moveTo(x, padding.top);\n            ctx.lineTo(x, height - padding.bottom);\n            ctx.strokeStyle = gridColor;\n            ctx.stroke();\n    \n            const yearLabel = currentYear + Math.floor(i / 12);\n            ctx.fillStyle = labelColor;\n            ctx.fillText(yearLabel, x, height - 5);\n        }\n    \n        // Draw hover vertical line first (underneath everything else)\n        if (hoverIndex !== null) {\n            const hoverX = getX(hoverIndex);\n    \n            ctx.beginPath();\n            ctx.moveTo(hoverX, padding.top);\n            ctx.lineTo(hoverX, height - padding.bottom);\n            ctx.strokeStyle = 'rgba(0, 0, 0, 0.2)'; // Subtle line\n            ctx.lineWidth = 1;\n            ctx.stroke();\n        }\n    \n        // Draw chart lines\n        const drawLine = (data, color, lineWidth) => {\n            ctx.beginPath();\n            ctx.strokeStyle = color; // Ensure this is fully opaque\n            ctx.lineWidth = lineWidth;\n            ctx.moveTo(getX(0), getY(data[0]));\n            for (let i = 1; i < months; i++) {\n                ctx.lineTo(getX(i), getY(data[i]));\n            }\n            ctx.stroke();\n        };\n    \n        drawLine(balanceData, '#175134', 2); // Balance line\n        drawLine(cumulativeInterestData, '#3EB721', 2.5); // Cumulative Interest\n        drawLine(cumulativePrincipalData, '#91BBA6', 2.5); // Cumulative Principal\n    \n        // Draw hover dots on top (above lines and vertical line)\n        if (hoverIndex !== null) {\n            const hoverX = getX(hoverIndex);\n    \n            const dotData = [\n                { y: getY(balanceData[hoverIndex]), color: '#175134' },\n                { y: getY(cumulativeInterestData[hoverIndex]), color: '#3EB721' },\n                { y: getY(cumulativePrincipalData[hoverIndex]), color: '#91BBA6' },\n            ];\n    \n            dotData.forEach(({ y, color }) => {\n                ctx.beginPath();\n                ctx.arc(hoverX, y, 5, 0, 2 * Math.PI);\n                ctx.fillStyle = color; // Ensure this is fully opaque\n                ctx.fill();\n            });\n        }\n    }\n    \n\n\n\n    \n    amortizationChartCanvas.addEventListener('mousemove', (event) => {\n        const rect = amortizationChartCanvas.getBoundingClientRect();\n        const x = event.clientX - rect.left;\n    \n        const padding = { top: 30, right: 20, bottom: 30, left: 70 };\n    \n        if (x >= padding.left && x <= amortizationChartCanvas.offsetWidth - padding.right) {\n            const chartWidth = amortizationChartCanvas.offsetWidth - padding.left - padding.right;\n    \n            const index = Math.round(\n                ((x - padding.left) / chartWidth) * (lastAmortizationData.balanceData.length - 1)\n            );\n    \n            if (index >= 0 && index < lastAmortizationData.balanceData.length) {\n                updateHoverValues(\n                    lastAmortizationData.balanceData[index],\n                    lastAmortizationData.cumulativeInterestData[index],\n                    lastAmortizationData.cumulativePrincipalData[index]\n                );\n    \n                const startDate = new Date();\n                const hoverDate = new Date(startDate.setMonth(startDate.getMonth() + index));\n                displayHoverDate(hoverDate);\n    \n                drawAmortizationChart(\n                    lastAmortizationData.balanceData,\n                    lastAmortizationData.cumulativeInterestData,\n                    lastAmortizationData.cumulativePrincipalData,\n                    index\n                );\n            }\n        }\n    });\n    \n    // Add support for touchmove\n    amortizationChartCanvas.addEventListener('touchmove', handleTouchEvent);\n    amortizationChartCanvas.addEventListener('touchstart', handleTouchEvent);\n    \n\n    \n\n    function handleTouchEvent(event) {\n        const rect = amortizationChartCanvas.getBoundingClientRect();\n        const touch = event.touches[0] || event.changedTouches[0];\n        const x = touch.clientX - rect.left;\n        const padding = { top: 30, right: 20, bottom: 30, left: 70 };\n    \n        if (x < padding.left || x > amortizationChartCanvas.offsetWidth - padding.right) {\n            // If touch is outside the chart, clear hover effects\n            revertValuesToTotals();\n            const hoverDateContainer = document.getElementById('amortizationHoverDate');\n            hoverDateContainer.textContent = ''; // Clear the hover date\n            drawAmortizationChart(\n                lastAmortizationData.balanceData,\n                lastAmortizationData.cumulativeInterestData,\n                lastAmortizationData.cumulativePrincipalData\n            );\n        } else {\n            const chartWidth = amortizationChartCanvas.offsetWidth - padding.left - padding.right;\n            const index = Math.round(\n                ((x - padding.left) / chartWidth) * (lastAmortizationData.balanceData.length - 1)\n            );\n    \n            if (index >= 0 && index < lastAmortizationData.balanceData.length) {\n                updateHoverValues(\n                    lastAmortizationData.balanceData[index],\n                    lastAmortizationData.cumulativeInterestData[index],\n                    lastAmortizationData.cumulativePrincipalData[index]\n                );\n    \n                const startDate = new Date();\n                const hoverDate = new Date(startDate.setMonth(startDate.getMonth() + index));\n                displayHoverDate(hoverDate);\n    \n                drawAmortizationChart(\n                    lastAmortizationData.balanceData,\n                    lastAmortizationData.cumulativeInterestData,\n                    lastAmortizationData.cumulativePrincipalData,\n                    index\n                );\n            }\n        }\n    \n        event.preventDefault(); // Prevent default scrolling\n    }\n    \n   \n   \n   \n    function displayHoverDate(date) {\n        const hoverDateContainer = document.getElementById('amortizationHoverDate');\n        const month = date.toLocaleString('default', { month: 'long' }); // Full month name\n        const year = date.getFullYear();\n        hoverDateContainer.textContent = `${month} ${year}`;\n    }\n    \n\n\n  \n    amortizationChartCanvas.addEventListener('mouseout', () => {\n        revertValuesToTotals();\n    \n        const hoverDateContainer = document.getElementById('amortizationHoverDate');\n        hoverDateContainer.textContent = ''; // Clear the hover date\n    \n        drawAmortizationChart(\n            lastAmortizationData.balanceData,\n            lastAmortizationData.cumulativeInterestData,\n            lastAmortizationData.cumulativePrincipalData\n        );\n    });\n    \n    // Add touchend for mobile devices\n    amortizationChartCanvas.addEventListener('touchend', () => {\n        revertValuesToTotals();\n    \n        const hoverDateContainer = document.getElementById('amortizationHoverDate');\n        hoverDateContainer.textContent = ''; // Clear the hover date\n    \n        drawAmortizationChart(\n            lastAmortizationData.balanceData,\n            lastAmortizationData.cumulativeInterestData,\n            lastAmortizationData.cumulativePrincipalData\n        );\n    });\n    \n\n\n\n/* PDF Generation Logic */\n    function revertValuesToTotals() {\n        const { totalInterestPaid, totalPrincipalPaid, totalAmountPaid } = lastAmortizationData;\n        updateHoverValues(totalAmountPaid, totalInterestPaid, totalPrincipalPaid);\n    }\n    \n    function updateAmortizationLabels(totalInterestPaid, totalPrincipalPaid, totalAmountPaid) {\n        const labels = [\n            { label: 'Total Interest Paid', value: totalInterestPaid, color: '#3EB721' },\n            { label: 'Total Principal Paid', value: totalPrincipalPaid, color: '#91BBA6' },\n            { label: 'Balance (Total Paid)', value: totalAmountPaid, color: '#175134' }\n        ];\n        \n        amortizationLabelsContainer.innerHTML = ''; // Clear previous labels\n        \n        labels.forEach(item => {\n            const labelElement = document.createElement('div');\n            labelElement.classList.add('label-item'); // Use CSS class instead of inline styles\n            \n            const colorCircle = document.createElement('span');\n            colorCircle.classList.add('color-circle');\n            colorCircle.style.backgroundColor = item.color;\n            \n            const labelText = document.createElement('span');\n            labelText.classList.add('label-name'); // Apply consistent class\n            labelText.textContent = item.label;\n            \n            const labelValue = document.createElement('span');\n            labelValue.classList.add('label-value'); // Apply consistent class\n            labelValue.textContent = formatter.format(item.value).replace('$', '');\n            \n            labelElement.appendChild(colorCircle);\n            labelElement.appendChild(labelText);\n            labelElement.appendChild(labelValue);\n            \n            amortizationLabelsContainer.appendChild(labelElement);\n        });\n    }\n    \n\n    calculateAndDisplayResults();\n\n    function calculateAmortizationData(homePrice, downPaymentAmount, interestRate, loanTerm) {\n        const principal = homePrice - downPaymentAmount;\n        const monthlyInterestRate = interestRate / 100 / 12;\n        const numberOfPayments = loanTerm * 12;\n    \n        const amortizationData = [];\n        let balance = principal;\n    \n        for (let i = 0; i < numberOfPayments; i++) {\n            const interestPayment = balance * monthlyInterestRate;\n            const principalPayment = (principal * monthlyInterestRate) / (1 - Math.pow(1 + monthlyInterestRate, -numberOfPayments)) - interestPayment;\n            balance = Math.max(balance - principalPayment, 0);\n    \n            amortizationData.push({\n                date: new Date(new Date().setMonth(new Date().getMonth() + i)).toLocaleDateString(\"en-US\", {\n                    month: \"short\",\n                    year: \"numeric\",\n                }),\n                principal: principalPayment,\n                interest: interestPayment,\n                balance: balance,\n            });\n    \n            if (balance <= 0) break;\n        }\n    \n        return amortizationData;\n    }\n    \n// Get the export button\nconst exportButton = document.querySelector(\".btn-icon-fluid\");\n\n// Remove existing listeners\nexportButton.replaceWith(exportButton.cloneNode(true));\n\n// Add the event listener\ndocument.querySelector(\".btn-icon-fluid\").addEventListener(\"click\", () => {\n    const homePrice = parseFloat(document.getElementById(\"home-price\").value) || 500000;\n    const downPaymentAmount = parseFloat(document.getElementById(\"down-payment-amount\").value) || 25000;\n    const interestRate = parseFloat(document.getElementById(\"interest-rate\").value) || 7.04;\n    const loanTerm = parseInt(document.getElementById(\"loan-term\").value) || 25;\n\n    const paymentData = [\n        { label: \"Home Price\", value: homePrice },\n        { label: \"Down Payment\", value: downPaymentAmount },\n        { label: \"Loan Term (Years)\", value: loanTerm },\n        { label: \"Interest Rate (%)\", value: interestRate },\n    ];\n\n    const amortizationData = calculateAmortizationData(homePrice, downPaymentAmount, interestRate, loanTerm);\n\n    // Generate the PDF\n    generateMortgagePdf(paymentData, amortizationData);\n});\n\n\n\n\n    console.log(\"End of script reached\");    \n\n});\n"],"names":["jsPDF","generateMortgagePdf","paymentData","amortizationData","doc","colors","navyBlue","forestGreen","lightGreen2","white","black","logoPath","logoX","logoY","logoWidth","logoAspectRatio","Error","logoHeight","addImage","error","console","titleY","setFont","setTextColor","setFontSize","text","subheaderY","disclaimerText","disclaimerY","paymentDetailsY","paymentDetails","map","item","label","concat","value","toLocaleString","autoTable","startY","head","content","styles","fillColor","textColor","fontStyle","body","amortizationY","lastAutoTable","finalY","amortizationDetails","row","index","date","principal","toFixed","interest","balance","pageHeight","internal","pageSize","height","setFillColor","rect","width","save","document","addEventListener","log","window","location","hostname","homePriceInput","getElementById","downPaymentAmountInput","downPaymentPercentageInput","loanTermInput","interestRateInput","paymentFrequencyInput","propertyTaxInput","pmiExpenseInput","hoaExpenseInput","updateBtn","resetBtn","canvas","amortizationChartCanvas","labelsContainer","amortizationLabelsContainer","defaultValues","homePrice","downPaymentAmount","downPaymentPercentage","loanTerm","interestRate","propertyTax","pmiExpense","hoaExpense","placeholder","formatter","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","inputsToRestrict","forEach","input","event","key","preventDefault","lastAmortizationData","parseFloat","Number","isInteger","Math","ceil","calculateAndDisplayResults","resetInputs","tabPaymentBreakdown","tabAmortizationSchedule","paymentBreakdownContent","amortizationScheduleContent","showTab","tabName","style","display","classList","add","remove","_lastAmortizationData","periodicPrincipalAndInterest","periodicPropertyTax","periodicPMI","periodicHOA","updateHorizontalStackedBarChart","_lastAmortizationData2","balanceData","cumulativeInterestData","cumulativePrincipalData","totalInterestPaid","totalPrincipalPaid","totalAmountPaid","drawAmortizationChart","updateAmortizationLabels","parseInt","monthlyInterestRate","numberOfPayments","pow","selectedFrequency","paymentFactor","adjustedPrincipalAndInterest","adjustedPropertyTax","adjustedPMI","adjustedHOA","updateLabels","calculateAmortizationSchedule","populateAmortizationTable","_objectSpread","totalPayment","updateHoverValues","labelValues","querySelectorAll","length","textContent","format","drawRoundedRect","ctx","x","y","radius","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","clip","principalAndInterest","pmi","hoa","getContext","parentWidth","parentElement","offsetWidth","clearRect","data","labels","chartHeight","chartWidth","total","reduce","a","b","maxTotal","max","gap","yOffset","cumulativeWidth","segmentWidth","fillStyle","isFirstSegment","isLastSegment","drawOuterRoundedRect","updateStackedBarLabels","innerHTML","labelItem","createElement","colorCircle","backgroundColor","labelName","labelValue","appendChild","isFirst","isLast","fill","periodicPaymentElement","frequencyLabel","totalPeriodicPayment","monthlyPrincipalAndInterest","i","interestPayment","principalPayment","push","schedule","slice","sum","r","tableBody","tr","dateCell","Date","setMonth","getMonth","toLocaleDateString","month","year","principalCell","interestCell","balanceCell","initializeExpandCollapseLogic","expandBox","querySelector","amortizationTableBody","expandText","rows","Array","from","isExpanded","hoverIndex","arguments","undefined","dpr","devicePixelRatio","innerWidth","scale","months","maxBalance","apply","_toConsumableArray","maxCumulative","originalYAxisMax","yAxisMax","padding","top","right","bottom","left","gridColor","labelColor","labelFont","font","textAlign","getY","getX","yValue","strokeStyle","lineWidth","stroke","fillText","intervalMonths","currentYear","getFullYear","floor","yearLabel","hoverX","drawLine","color","dotData","_ref","arc","PI","getBoundingClientRect","clientX","round","startDate","hoverDate","displayHoverDate","handleTouchEvent","touch","touches","changedTouches","revertValuesToTotals","hoverDateContainer","_lastAmortizationData3","labelElement","labelText","replace","calculateAmortizationData","exportButton","replaceWith","cloneNode"],"sourceRoot":""}