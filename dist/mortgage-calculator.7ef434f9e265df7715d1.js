document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("myChart");if(e){var t=e.getContext("2d"),a=0,n={homePrice:4e5,downPayment:2e4,loanTerm:15,interestRate:7.2,propertyTaxes:333.33,propertyTaxesFrequency:"monthly",pmi:0,hoa:0},o=function(e,t,a,n){var o=n/100/12,r=12*a,l=(e-t)*(o*Math.pow(1+o,r))/(Math.pow(1+o,r)-1);return Math.round(100*l)/100},r=function(e,t){return"annually"===t?e/12:e},l=function(e,t,a,n,o){var l=r(t,a);return Math.round(100*(e+l+n+o))/100},d={id:"centerTextPlugin",afterDraw:function(e){!function(e){var t=e.ctx;t.save();var n=(e.chartArea.left+e.chartArea.right)/2,o=(e.chartArea.top+e.chartArea.bottom)/2;t.textAlign="center",t.textBaseline="middle";var r="40px";window.innerWidth<=450&&(r="25px"),t.font="bold ".concat(r," Open Sans"),t.fillStyle="#000",t.clearRect(n-75,o-25,150,50),t.fillText("Total: $"+a,n,o),t.restore()}(e),function(e){var t=document.getElementById("chart-legend");t.innerHTML="";var a=e.data.labels.map((function(t,a){var n=e.data.datasets[0].data[a],o=e.data.datasets[0].backgroundColor[a];return'\n                    <div class="legend-item">\n                        <span class="legend-color-box" style="background-color:'.concat(o,';"></span>\n                        <span class="legend-text">').concat(t,": $").concat(n,"</span>\n                    </div>\n                ")}));t.innerHTML=a.join("")}(e)}},c=new Chart(t,{type:"doughnut",data:{labels:["Principal and Interest","Property Taxes","Private Mortgage Insurance (PMI)","Homeowner's Association Fees (HOA)"],datasets:[{label:"Mortgage Breakdown",data:[o(n.homePrice,n.downPayment,n.loanTerm,n.interestRate),Math.round(100*r(n.propertyTaxes,n.propertyTaxesFrequency))/100,Math.round(100*n.pmi)/100,Math.round(100*n.hoa)/100],backgroundColor:["rgba(100, 149, 237, 0.9)","rgba(255, 223, 128, 0.9)","rgba(192, 192, 192, 0.9)","rgba(60, 179, 113, 0.9)"],borderColor:["#fff"],borderWidth:10}]},options:{cutout:"70%",plugins:{legend:{display:!1},datalabels:{display:!0,color:"#000",font:{weight:"bold",size:40,family:"Open Sans"},formatter:function(e){return"$".concat(e)}},tooltip:{callbacks:{label:function(e){return" ".concat(e.label,": $").concat(e.raw)},labelTextColor:function(){return"#fff"}},titleFont:{size:28,family:"Open Sans"},bodyFont:{size:26,family:"Open Sans"},backgroundColor:"#333",titleColor:"#fff",bodyColor:"#fff",displayColors:!1}},elements:{arc:{borderWidth:1,borderColor:"#fff"}},animation:{duration:0}},plugins:[d]}),i=function(){c.update()};document.querySelector(".mortgage-btn").addEventListener("click",(function(e){e.preventDefault();var t=parseFloat(document.getElementById("mortgage-price").value),n=parseFloat(document.getElementById("down-payment").value),d=parseFloat(document.getElementById("mortgage-term").value),s=parseFloat(document.getElementById("interest-rate").value),u=parseFloat(document.getElementById("property-taxes").value)||0,m=document.getElementById("tax-frequency").value,p=parseFloat(document.getElementById("pmi-cost").value)||0,f=parseFloat(document.getElementById("hoa-cost").value)||0;if(!(isNaN(t)||isNaN(n)||isNaN(d)||isNaN(s)||t<=0||n<0||d<=0||s<=0)){var g=o(t,n,d,s);a=l(g,u,m,p,f),c.data.datasets[0].data=[g,Math.round(100*r(u,m))/100,Math.round(100*p)/100,Math.round(100*f)/100],i()}})),a=l(o(n.homePrice,n.downPayment,n.loanTerm,n.interestRate),n.propertyTaxes,n.propertyTaxesFrequency,n.pmi,n.hoa),i()}}));